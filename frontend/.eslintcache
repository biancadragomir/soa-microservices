[{"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\App.tsx":"1","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\index.tsx":"2","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Login.js":"3","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\ProfilePage.js":"4","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Signup.js":"5","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\providers\\UserProvider.js":"6","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\firebase.js":"7","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Application.js":"8","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\PasswordReset.js":"9","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\reportWebVitals.ts":"10","D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Spacer.js":"11"},{"size":877,"mtime":1609503403647,"results":"12","hashOfConfig":"13"},{"size":543,"mtime":1611685909463,"results":"14","hashOfConfig":"13"},{"size":4270,"mtime":1611688932027,"results":"15","hashOfConfig":"13"},{"size":6468,"mtime":1612200881295,"results":"16","hashOfConfig":"13"},{"size":3670,"mtime":1609505476820,"results":"17","hashOfConfig":"13"},{"size":663,"mtime":1609505534439,"results":"18","hashOfConfig":"13"},{"size":1615,"mtime":1609509868751,"results":"19","hashOfConfig":"13"},{"size":612,"mtime":1609505980299,"results":"20","hashOfConfig":"13"},{"size":2303,"mtime":1609578395474,"results":"21","hashOfConfig":"13"},{"size":425,"mtime":1609500691828,"results":"22","hashOfConfig":"13"},{"size":133,"mtime":1611686142466,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1uyb6wj",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"33"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\App.tsx",[],["54","55"],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\index.tsx",[],["56","57"],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Login.js",["58"],"import React, { useState } from \"react\";\r\nimport { Link } from \"@reach/router\";\r\nimport { auth } from \"../firebase\";\r\nimport firebase from \"firebase/app\";\r\nimport Button from \"react-bootstrap/esm/Button\";\r\n\r\nconst SignIn = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [authToken, setAuthToken] = useState(\"\");\r\n\r\n  const onChangeHandler = (event) => {\r\n    const { name, value } = event.currentTarget;\r\n\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    } else if (name === \"userPassword\") {\r\n      setPassword(value);\r\n    }\r\n  };\r\n\r\n  const signInWithEmailAndPasswordHandler = (event, email, password) => {\r\n    event.preventDefault();\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then((user) => {\r\n        console.log(\"User is logged in!\");\r\n        firebase\r\n          .auth()\r\n          .currentUser.getIdToken(/* forceRefresh */ true)\r\n          .then(function (idToken) {\r\n            console.log(\"ID token is: \", idToken);\r\n            setAuthToken(idToken);\r\n            // TODO Send token to your backend via HTTPS\r\n            // ...\r\n            // fetch('http://localhost:3001', {headers: {\r\n            // \"Authorization\": idToken}})\r\n            // .then(data => data.body)\r\n            // .then(body => console.log(body))\r\n          })\r\n          .catch(function (error) {\r\n            console.log(\"error\");\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        setError(\"Error signing in with password and email!\");\r\n        console.error(\"Error signing in with password and email\", error);\r\n      });\r\n    console.log(\"should be logged in!\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-8\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign In</h1>\r\n      <div className=\"border border-blue-400 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8\">\r\n        {error !== null && (\r\n          <div className=\"py-4 bg-red-600 w-full text-white text-center mb-3\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <form className=\"w-25 p-3\">\r\n          <div class=\"input-group mb-3\">\r\n            <div class=\"input-group-prepend\">\r\n              <span class=\"input-group-text\" id=\"inputGroup-sizing-default\">\r\n                Email\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"userEmail\"\r\n              name=\"userEmail\"\r\n              value={email}\r\n              onChange={(event) => onChangeHandler(event)}\r\n              aria-label=\"Default\"\r\n              aria-describedby=\"inputGroup-sizing-default\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"input-group mb-3\">\r\n            <div class=\"input-group-prepend\">\r\n              <span class=\"input-group-text\" id=\"inputGroup-sizing-default\">\r\n                Password\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"password\"\r\n              class=\"form-control\"\r\n              value={password}\r\n              name=\"userPassword\"\r\n              onChange={(event) => onChangeHandler(event)}\r\n              aria-label=\"Default\"\r\n              aria-describedby=\"inputGroup-sizing-default\"\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            className=\"bg-green-400 hover:bg-green-500 w-full py-2 text-white\"\r\n            onClick={(event) => {\r\n              signInWithEmailAndPasswordHandler(event, email, password);\r\n            }}\r\n          >\r\n            Sign in\r\n          </Button>\r\n        </form>\r\n        <p className=\"text-center my-3\">or</p>\r\n        {/* <Button className=\"bg-red-500 hover:bg-red-600 w-full py-2 text-white\">\r\n          Sign in with Google\r\n        </Button> */}\r\n        <p className=\"text-center my-3\">\r\n          Don't have an account?{\" \"}\r\n          <Link to=\"signUp\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign up here\r\n          </Link>{\" \"}\r\n          <br />{\" \"}\r\n          <Link\r\n            to=\"passwordReset\"\r\n            className=\"text-blue-500 hover:text-blue-600\"\r\n          >\r\n            Forgot Password?\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignIn;\r\n",["59","60"],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\ProfilePage.js",["61"],"import firebase from \"firebase/app\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { auth } from \"../firebase\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Spacer from \"./Spacer\";\r\nimport { Card, Row, Col } from \"react-bootstrap\";\r\n\r\nconst ProfilePage = () => {\r\n  const user = useContext(UserContext);\r\n  const { displayName, email } = user;\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [ownedVehicles, setOwnedVehicles] = useState([]);\r\n\r\n  const saveNewVehicle = async (vehicleUrl) => {\r\n    firebase\r\n      .auth()\r\n      .currentUser.getIdToken()\r\n      .then(async (token) => {\r\n        console.log(\"posting...\");\r\n        let url = new URL(\"http://localhost:3002/addVehicles\");\r\n        console.log({ url: vehicleUrl });\r\n\r\n        const response = await fetch(url, {\r\n          method: \"post\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            // 'Content-Type': 'application/x-www-form-urlencoded',\r\n          },\r\n          body: JSON.stringify({ url: vehicleUrl }),\r\n        });\r\n        const vehicles = await response.json();\r\n        setOwnedVehicles(vehicles);\r\n        console.log(vehicles);\r\n      });\r\n  };\r\n\r\n  const deleteVehicle = async (vehicleName) => {\r\n    firebase\r\n      .auth()\r\n      .currentUser.getIdToken()\r\n      .then(async (token) => {\r\n        console.log(\"DELETE...\");\r\n        let url = new URL(\"http://localhost:3002/deleteVehicles\");\r\n        console.log({ name: vehicleName });\r\n\r\n        const response = await fetch(url, {\r\n          method: \"delete\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            // 'Content-Type': 'application/x-www-form-urlencoded',\r\n          },\r\n          body: JSON.stringify({ name: vehicleName }),\r\n        });\r\n        const vehicles = await response.json();\r\n        setOwnedVehicles(vehicles);\r\n        console.log(vehicles);\r\n      });\r\n  };\r\n\r\n  const fetchVehicles = async () => {\r\n    firebase\r\n      .auth()\r\n      .currentUser.getIdToken()\r\n      .then(async (token) => {\r\n        console.log(\"getting...\");\r\n        let url = new URL(\"http://localhost:3002/vehicles\");\r\n        const response = await fetch(url, {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        });\r\n        const data = await response.json();\r\n        const items = data.results;\r\n        console.log(items);\r\n        items.map((currentItem) => {\r\n          items.push({\r\n            name: currentItem.name,\r\n            model: currentItem.model,\r\n            manufacturer: currentItem.manufacturer,\r\n          });\r\n        });\r\n        setVehicles(items);\r\n      });\r\n  };\r\n\r\n  const getButtonsSection = () => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <Button\r\n          style={{ height: 40, marginLeft: 16 }}\r\n          onClick={() => fetchVehicles()}\r\n        >\r\n          Get vehicles\r\n        </Button>\r\n        <Button\r\n          style={{ height: 40, marginLeft: 16 }}\r\n          className=\"btn-danger\"\r\n          onClick={() => {\r\n            auth.signOut();\r\n          }}\r\n        >\r\n          Sign out\r\n        </Button>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  const buildVehiclesList = () => {\r\n    return vehicles.map((currentVehicle) => {\r\n      return (\r\n        <Card style={{ margin: 16, width: 500 }}>\r\n          <div>\r\n            <Row>\r\n              <Button\r\n                onClick={() => {\r\n                  const remainingBuyableVehicles = vehicles.filter(\r\n                    (v) => v.name !== currentVehicle.name\r\n                  );\r\n                  setVehicles(remainingBuyableVehicles);\r\n                  console.log(\"saving \", currentVehicle.url);\r\n                  saveNewVehicle(currentVehicle.url);\r\n                }}\r\n              >\r\n                +\r\n              </Button>\r\n              <div className=\"column\" style={{ padding: 16 }}>\r\n                <h2 className=\"text-3xl mb-2 font-bold\">\r\n                  {currentVehicle.name}\r\n                </h2>\r\n                <h6 className=\"text-3xl mb-2  font-bold\">\r\n                  {currentVehicle.model}\r\n                </h6>\r\n                <h6 className=\"text-3xl mb-2  font-bold\">\r\n                  {currentVehicle.manufacturer}\r\n                </h6>\r\n              </div>\r\n            </Row>\r\n          </div>\r\n        </Card>\r\n      );\r\n    });\r\n  };\r\n\r\n  const buildOwnedVehiclesList = () => {\r\n    return ownedVehicles.map((currentVehicle) => {\r\n      return (\r\n        <Card style={{ margin: 16, width: 500 }}>\r\n          <div>\r\n            <Row>\r\n              <Button\r\n                className=\"btn-danger\"\r\n                onClick={() => {\r\n                  deleteVehicle(currentVehicle.name);\r\n                  setVehicles([currentVehicle, ...vehicles]);\r\n                }}\r\n              >\r\n                -\r\n              </Button>\r\n              <div className=\"column\" style={{ padding: 16 }}>\r\n                <h2 className=\"text-3xl mb-2 font-bold\">\r\n                  {currentVehicle.name}\r\n                </h2>\r\n                <h6 className=\"text-3xl mb-2  font-bold\">\r\n                  {currentVehicle.model}\r\n                </h6>\r\n                <h6 className=\"text-3xl mb-2  font-bold\">\r\n                  {currentVehicle.manufacturer}\r\n                </h6>\r\n              </div>\r\n            </Row>\r\n          </div>\r\n        </Card>\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"column w-11/12 md:w-2/4 py-8 px-4 md:px-8 \">\r\n      <Spacer />\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Hello!</h1>\r\n      <div style={{ marginTop: 100 }} />\r\n      <Row\r\n        style={{\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <div className=\"card\" style={{ width: \"18rem\", padding: 16 }}>\r\n          <h4 class=\"card-title\">Your information</h4>\r\n          <h2 className=\"text-2xl font-semibold\">{displayName}</h2>\r\n          <h3 className=\"italic\">{email}</h3>\r\n        </div>\r\n        <div style={{ marginLeft: 16 }}></div>\r\n        {getButtonsSection()}\r\n      </Row>\r\n      <Spacer />\r\n      <Row>\r\n        <Col>\r\n          <h2>Available vehicles:</h2>\r\n          {buildVehiclesList()}\r\n        </Col>\r\n        <Col>\r\n          <h2>Your vehicles</h2>\r\n          {buildOwnedVehiclesList()}\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;\r\n",["62","63"],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Signup.js",[],["64","65"],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\providers\\UserProvider.js",[],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\firebase.js",[],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Application.js",[],["66","67"],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\PasswordReset.js",[],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\reportWebVitals.ts",[],"D:\\Master\\an-2\\sem-1\\SOA\\twitter-sth\\frontend2\\my-app\\src\\components\\Spacer.js",[],{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"68","replacedBy":"72"},{"ruleId":"70","replacedBy":"73"},{"ruleId":"74","severity":1,"message":"75","line":11,"column":10,"nodeType":"76","messageId":"77","endLine":11,"endColumn":19},{"ruleId":"68","replacedBy":"78"},{"ruleId":"70","replacedBy":"79"},{"ruleId":"80","severity":1,"message":"81","line":76,"column":33,"nodeType":"82","messageId":"83","endLine":76,"endColumn":35},{"ruleId":"68","replacedBy":"72"},{"ruleId":"70","replacedBy":"73"},{"ruleId":"68","replacedBy":"84"},{"ruleId":"70","replacedBy":"85"},{"ruleId":"68","replacedBy":"86"},{"ruleId":"70","replacedBy":"87"},"no-native-reassign",["88"],"no-negated-in-lhs",["89"],["88"],["89"],"no-unused-vars","'authToken' is assigned a value but never used.","Identifier","unusedVar",["88"],["89"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside",["88"],["89"],["88"],["89"],"no-global-assign","no-unsafe-negation"]